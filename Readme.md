# OTUS ДЗ Файловые хранилища - NFS, SMB, FTP (Centos 7)
----------------------------------------------------------------------- 

```
Домашнее задание
Vagrant стенд для NFS или SAMBA
Цель: В результате выполнения ДЗ студент получит Vagrant стенд для NFS или SAMBA.
NFS или SAMBA на выбор:

vagrant up должен поднимать 2 виртуалки: сервер и клиент
на сервер должна быть расшарена директория
на клиента она должна автоматически монтироваться при старте (fstab или autofs)
в шаре должна быть папка upload с правами на запись
- требования для NFS: NFSv3 по UDP, включенный firewall

* Настроить аутентификацию через KERBEROS 
```

### Как запустить:
- git clone git@github.com:staybox/otus_dz29.git && cd otus_dz29 && vagrant up

### Как проверить:

1. После поднятия виртуальных машин, необходимо перейти на сервер и создать там какое то количество файлов (файлы можно создавать и на клиенте):

![Image 1](https://raw.githubusercontent.com/staybox/otus_dz29/master/screenshots/filesnfsshare.png)

2. Далее переходим на клиентскую машину и переходим в директорию, которую мы указывали как ту, которую надо автоматически монтировать при обращении к ней ```cd /mnt/myshare/upload```, после чего мы увидим наши созданные файлы, которые были созданы и размещены на сервере. Также можно использовать команду ```ls /mnt/myshare/upload```.

![Image 2](https://raw.githubusercontent.com/staybox/otus_dz29/master/screenshots/clientnfs.png)

Также можно настроить так, чтобы необходимая нам серверная папка монтировалась без указания папки upload. Для этого необходимо привести конфигурационные файлы, к виду, которые описаны в этой инструкции - http://sysadm.pp.ua/linux/nfs-and-autofs.html. Это называется таблица прямых значений, и тогда когда мы обратимся по пути ```/mnt/myshare```, то мы сразу увидим наши файлы.

Кроме этого при использовании файловых ресурсов можно использовать механизм обезличивания владельцев, это встроенные механизм NFS. Кроме этого можно использовать LDAP, для того чтобы разраничить доступ к файлам.

3. Также мы можем посмотреть что наша папка автоматически смонтировалась через команду ```mount```:

![Image 3](https://raw.githubusercontent.com/staybox/otus_dz29/master/screenshots/mountfs.png)

